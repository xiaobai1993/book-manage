# 图书管理系统 v1.0 PRD（MVP简化版）

## 1. 文档信息
- **产品名称**：图书管理系统 v1.0
- **文档版本**：v1.0
- **作者**：[产品负责人]
- **创建日期**：2025年11月8日
- **最后更新**：2025年11月8日

## 2. 产品概述
### 2.1 产品背景
传统图书管理方式效率低下，人工记录易出错、查询不便，亟需一个轻量化系统实现图书信息数字化管理与借阅流程简化。

### 2.2 产品目标
- 实现图书信息的数字化录入与管理
- 简化用户借还书操作流程
- 自动记录借阅历史与图书状态

### 2.3 目标用户
- **图书管理员**：负责图书信息维护、借阅记录查看与管理
- **普通用户**：完成注册登录后借阅图书、查看个人借阅信息

### 2.4 产品定位
聚焦基础图书管理需求的实用型系统，以简洁操作满足中小规模场景下的图书借还与信息管理诉求。

## 3. 产品功能需求
### 3.1 用户管理模块
#### 3.1.1 用户注册（含邮箱验证）
- **功能描述**：新用户通过邮箱完成注册，需通过验证码验证邮箱有效性，验证通过后方可完成注册。
- **前置条件**：系统处于开放注册状态（系统默认长期开放）
- **输入**：邮箱、密码、确认密码、邮箱验证码
- **处理流程**：
    1. 用户填写注册表单（邮箱、密码、确认密码）
    2. 系统验证邮箱格式有效性及唯一性
    3. 验证通过后，发送6位数字验证码至用户邮箱（验证码有效期30分钟，每分钟最多重发1次）
    4. 用户输入验证码，系统验证验证码正确性
    5. 验证码通过后，创建用户账户（根据配置文件分配管理员/普通用户角色）
- **输出**：注册成功提示或具体失败原因
- **特殊要求**：密码长度至少8位
- **异常处理**：
    - 邮箱格式错误：提示“请输入正确的邮箱格式”
    - 邮箱已被注册：提示“该邮箱已注册，请直接登录”
    - 验证码错误/过期：提示“验证码错误或已过期，请重新获取”
    - 密码不一致：提示“两次输入的密码不一致，请核对”

#### 3.1.2 用户登录
- **功能描述**：已注册用户通过邮箱和密码登录系统，登录后根据角色展示对应功能权限。
- **前置条件**：用户已完成注册
- **输入**：邮箱 + 密码
- **处理流程**：
    1. 用户提交邮箱与密码
    2. 系统验证凭据有效性
    3. 根据配置文件识别用户角色（管理员/普通用户）
    4. 跳转至系统主页（展示对应角色功能菜单）
- **输出**：系统主页或登录失败提示
- **特殊要求**：无
- **异常处理**：
    - 邮箱或密码错误：提示“邮箱或密码错误，请重试”

#### 3.1.3 密码找回
- **功能描述**：用户通过邮箱验证码重置遗忘的密码。
- **处理流程**：
    1. 用户输入注册邮箱
    2. 系统验证邮箱是否已注册
    3. 验证通过后发送6位验证码至邮箱（规则同注册验证）
    4. 用户输入验证码通过后，跳转至新密码设置页面
    5. 用户提交新密码（需满足8位长度要求），系统更新密码
- **异常处理**：
    - 邮箱未注册：提示“该邮箱尚未注册，请先完成注册”
    - 验证码错误/过期：提示“验证码错误或已过期，请重新获取”

#### 3.1.4 个人信息管理
- **功能描述**：用户查看及修改个人基础信息与账户安全设置。
- **功能范围**：
    - 查看：个人注册邮箱、注册时间、当前借阅数量
    - 修改：重置登录密码（需验证原密码）
    - 查询：个人历史借阅记录（含图书名称、借阅日期、应还日期、归还状态）

### 3.2 图书管理模块
- **权限说明**：图书信息的添加、编辑、删除功能仅管理员可见并操作；普通用户仅可查看与检索图书信息。

#### 3.2.1 图书信息维护
##### 3.2.1.1 添加图书
- **输入**：书名、作者、ISBN、分类、总数量、图书描述（其中书名、ISBN、总数量为必填项）
- **处理流程**：
    1. 管理员填写图书信息表单
    2. 系统校验必填项完整性及ISBN唯一性
    3. 校验通过后创建图书记录，初始可用库存=总数量
- **异常处理**：
    - 必填项缺失：提示“请填写所有必填字段”
    - ISBN重复：提示“该ISBN已存在，请勿重复添加”

##### 3.2.1.2 编辑图书
- **输入**：需更新的图书信息（如作者、分类、总数量等）
- **处理流程**：
    1. 管理员选择需编辑的图书
    2. 修改信息后提交，系统校验ISBN唯一性（若修改ISBN）
    3. 更新图书信息，若调整总数量需保证“总数量≥已借出数量”（即库存非负）
- **异常处理**：
    - 库存为负：提示“总数量不能小于已借出数量，无法更新”
    - ISBN重复（修改时）：提示“该ISBN已被其他图书使用”

##### 3.2.1.3 删除图书
- **处理流程**：
    1. 管理员选择需删除的图书
    2. 系统检查该图书是否存在未归还的借阅记录
    3. 无未归还记录则执行删除，反之提示无法删除
- **异常处理**：
    - 存在未归还记录：提示“该图书有未归还借阅记录，无法删除”

#### 3.2.2 图书检索功能
- **功能描述**：用户通过多条件快速查找图书，支持关键词搜索与分类筛选组合使用。
- **检索方式**：
    - 关键词搜索：支持书名、作者关键词模糊匹配
    - 分类筛选：按图书分类（如文学、科技、教育等）筛选
- **显示内容**：图书封面（可选）、书名、作者、ISBN、分类、当前可借数量、图书状态（可借/已借出）
- **异常处理**：
    - 搜索无结果：提示“未找到匹配的图书，请尝试调整关键词或分类”
    - 关键词过短：提示“搜索关键词需至少2个字符”

### 3.3 借阅管理模块
#### 3.3.1 借书功能
- **功能描述**：已登录用户借阅可借状态的图书，系统自动记录借阅信息并更新库存。
- **前置条件**：用户账户状态正常（无违规记录）
- **输入**：图书ID（或通过检索结果点击“借阅”按钮）
- **处理流程**：
    1. 用户发起借阅请求
    2. 系统校验：用户当前借阅数量＜5本（借阅上限）、图书当前可借数量＞0
    3. 校验通过后，创建借阅记录（含用户ID、图书ID、借阅日期、应还日期=借阅日+30天）
    4. 更新图书可借数量（减少1本）
- **操作反馈**：“《[书名]》借阅成功，应还日期：[YYYY-MM-DD]”
- **异常处理**：
    - 借阅达上限：提示“您当前已借阅5本图书，达到上限，无法继续借阅”
    - 图书无库存：提示“该图书暂无库存，无法借阅”
    - 图书不存在：提示“未找到该图书信息”

#### 3.3.2 还书功能
- **功能描述**：用户归还已借阅的图书，系统更新借阅记录状态与图书库存。
- **前置条件**：用户已登录，且该图书为当前用户所借
- **输入**：图书ID（或通过“个人借阅记录”点击“归还”按钮）
- **处理流程**：
    1. 用户发起还书请求
    2. 系统查找该用户名下该图书的未归还借阅记录
    3. 确认记录后，更新借阅记录为“已归还”状态，记录实际归还日期
    4. 更新图书可借数量（增加1本）
- **操作反馈**：“《[书名]》已成功归还，感谢使用！”
- **异常处理**：
    - 未借阅该图书：提示“您未借阅此图书，无法执行归还操作”
    - 图书已归还：提示“该图书已归还，无需重复操作”

#### 3.3.3 借阅记录查询
##### 3.3.3.1 个人借阅记录（普通用户/管理员）
- **显示内容**：图书名称、借阅日期、应还日期、实际归还日期、归还状态（未归还/已归还）
- **操作支持**：对未归还记录提供“归还”按钮，对已归还记录支持筛选查看

##### 3.3.3.2 全量借阅记录（仅管理员）
- **显示内容**：用户名（邮箱）、图书名称、借阅日期、应还日期、归还状态
- **筛选功能**：支持按用户邮箱、图书名称、归还状态（未归还/已归还）筛选

## 4. 业务规则与约束
### 4.1 借阅规则
- 普通用户单次最多借阅5本图书
- 每本图书借阅期限为30天（当前版本仅记录应还日期，无逾期罚款机制）
- 暂不支持图书预约功能

### 4.2 权限规则
| 功能模块               | 普通用户 | 管理员 |
| ---------------------- | -------- | ------ |
| 注册/登录/密码找回     | √        | √      |
| 个人信息管理           | √        | √      |
| 图书检索与查看         | √        | √      |
| 图书添加/编辑/删除     | ×        | √      |
| 借还书操作             | √        | √      |
| 个人借阅记录查询       | √        | √      |
| 全量借阅记录查询       | ×        | √      |

### 4.3 数据约束
- 用户邮箱：需符合标准邮箱格式，且在系统内唯一
- 用户密码：长度≥8位，存储时需通过bcrypt算法加密
- 图书ISBN：系统内唯一，需符合ISBN编码规则
- 图书数量：总数量、可借数量均为非负整数

## 5. 用户体验需求
### 5.1 界面要求
- 导航结构清晰，核心功能（如检索、借还书、个人中心）入口突出
- 操作流程简化，减少不必要的跳转步骤
- 错误提示需明确具体原因，引导用户正确操作

### 5.2 性能要求
- 页面加载时间≤3秒
- 图书检索结果返回时间≤2秒
- 支持同时在线操作用户数≥50人

## 6. 非功能性需求
### 6.1 数据安全
- 用户密码采用bcrypt加密存储，不存储明文密码
- 邮箱验证码通过安全通道传输，防止截取
- 限制验证码重发频率，防止暴力破解

### 6.2 系统可用性
- 系统正常运行时间≥99%
- 关键操作（借还书、信息维护）需记录操作日志，便于问题排查

## 7. 产品路线图
### 7.1 第一期（当前版本v1.0）
- 完成用户注册（含邮箱验证）、登录、密码找回功能
- 实现图书信息的增删改查（管理员权限）
- 上线基础借还书流程与借阅记录查询功能
- 完善异常处理与用户操作引导

### 7.2 第二期（待规划）
- 新增图书预约功能
- 开发借阅数据统计报表（如热门图书、借阅率等）
- 增加逾期提醒与管理机制
- 优化权限体系，支持多角色细分

## 8. 附录
### 8.1 术语表
- **ISBN**：国际标准书号，用于唯一标识图书的编码
- **借阅记录**：记录用户借阅图书的核心数据，包含用户ID、图书ID、借阅日期、应还日期、归还状态等信息

要不要我帮你导出一份**可编辑的Word格式文档**，方便你后续线下修改或分享给团队？