services:
  # 后端服务
  - type: web
    name: book-manage-backend
    env: go
    plan: free
    buildCommand: go mod download && go build -o book-manage
    startCommand: ./book-manage
    envVars:
      # 数据库类型（PostgreSQL）
      - key: DB_TYPE
        value: postgres
      # 数据库连接（Supabase 会提供 DATABASE_URL）
      # 注意：如果 Supabase 提供了 DATABASE_URL，会自动使用，无需单独配置
      # 如果没有，可以手动配置以下变量：
      # - key: DB_HOST
      #   value: your-supabase-host
      # - key: DB_PORT
      #   value: "5432"
      # - key: DB_USER
      #   value: your-supabase-user
      # - key: DB_PASSWORD
      #   value: your-supabase-password
      # - key: DB_NAME
      #   value: your-supabase-database
      
      # 服务器端口（Render 会自动设置 PORT 环境变量）
      # - key: PORT
      #   value: "8080"
      
      # JWT 密钥（请在生产环境中使用强密钥）
      - key: JWT_SECRET
        generateValue: true
      
      # 邮箱配置（可选）
      # - key: SMTP_HOST
      #   value: smtp.qq.com
      # - key: SMTP_PORT
      #   value: "465"
      # - key: SMTP_USER
      #   value: your-email@qq.com
      # - key: SMTP_PASSWORD
      #   value: your-email-password
      
      # 管理员邮箱（用逗号分隔）
      # - key: ADMIN_EMAILS
      #   value: admin@lib.com,your-admin@example.com

